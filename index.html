<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>WebARジェネレータ</title>

    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/pure-min.css">
    <link rel="stylesheet" href="https://unpkg.com/purecss@1.0.0/build/grids-responsive-min.css">
    <link rel="stylesheet" href="https://yoridrill.github.io/web-ar-generator/css/screen.css">

    <script src="https://cdn.jsdelivr.net/npm/vue@2.5.13"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/88/three.min.js"></script>
</head>

<body>
    <div id="app">
        <section class="pure-g border_b flexAlign_c">
            <div class="pure-u-1 pure-u-md-1-2 pad_t">
                <a href="https://web-ar-generator.firebaseapp.com">
                    <img src="images/ar.png" width="69" height="35">
                </a>
                <span>
                    WebARジェネレータ
                </span>
            </div>
            <div class="pure-u-1 pure-u-md-1-2">
                <div class="pure-menu pure-menu-horizontal">
                    <ul class="pure-menu-list">
                        <li class="pure-menu-item"><a class="pure-menu-link" @click="scroll($refs.howto)">使い方</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" @click="scroll($refs.attention)">注意</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" @click="scroll($refs.example)">一例</a></li>
                        <li class="pure-menu-item"><a class="pure-menu-link" @click="scroll($refs.contact)">問い合わせ</a></li>
                    </ul>
                </div>
            </div>
        </section>

        <section>
            <p class="pad_a font_s">
                <a target="_blank" href="https://imgur.com/">imgur</a>などにアップロードした自作のGIFアニメや透過PNGなどを、<b>AR（拡張現実）表示</b>させるジェネレータです。<br> P名刺などにどうぞ！
            </p>
        </section>

        <section>
            <div class="pure-g">
                <div class="pure-u-1 pure-u-lg-1-3 pWrap">
                    <canvas ref="pCanvas" style="width: 100%; height: 100%"></canvas>
                </div>
                <div class="pure-u-1 pure-u-lg-1-3">
                    <div class="pure-form">
                        <template v-for="arIdx in [2,3,1,0]">
                            <legend><span :style="{color: arData[arIdx].color}" style="opacity: 0.3">■ </span>{{arData[arIdx].title}}</legend>
                            <div class="pure-g">
                                <div class="pure-u-2-5">
                                    <div v-if="!arData[arIdx].imageFile" class="pure-button formImageSelect">
                                        <input @change="selectImage(arIdx,$event)" type="file" accept="image/*">
                                        ファイルを選択
                                    </div>
                                    <div v-else>
                                        <button @click="uploadImage(arIdx)" class="pure-button pure-button-primary">確定</button>
                                        <button @click="cancelImage(arIdx)" class="pure-button">取消</button>
                                    </div>
                                </div>
                                <input v-model="arData[arIdx].imageUrl" class="pure-u-3-5" placeholder="画像URL">
                            </div>
                            <div class="pure-g flexAlign_c">
                                <div class="pure-u-1-5">
                                    <select v-model.number="arData[arIdx].size[0]">
                                        <option value="2">横</option>
                                        <option v-for="i in 9" :value=i>{{i}}</option>
                                    </select>
                                </div>
                                <div class="pure-u-1-5">
                                    <select v-model.number="arData[arIdx].size[1]">
                                        <option value="2">縦</option>
                                        <option v-for="i in 9" :value=i>{{i}}</option>
                                    </select>
                                </div>
                                <template v-for="check in arData[arIdx].checks">
                                    <div class="pure-u-1-5">
                                        <label class="pure-checkbox">
                                            <input v-model="check.flg" type="checkbox"> {{check.label}}
                                        </label>
                                    </div>
                                </template>
                            </div>
                        </template>

                        <div class="txt_c mar_t">
                            <button @click="previewViwer" :class="{'pure-button-disabled': isSubmitDisabled}" class="pure-button pure-input-1-3">プレビュー</button>
                            <button @click="createAr" :class="{'pure-button-disabled': isSubmitDisabled}" class="pure-button pure-button-primary pure-input-1-2">AR作成！</button>
                        </div>
                    </div>
                </div>
                <div class="pure-u-1 pure-u-lg-1-3">
                    <div ref="createArea" v-show="createAreaVisibleFlg" class="pad_a">
                        <transition name="fade" :duration="{enter: 500, leave: 100}">
                            <div v-show="!creatingFlg" class="fade pad_a font_s">
                                <h3>ジャイロAR</h3>
                                <p>
                                    マーカー不要で、ARは空間のある一点に固定で、自分が動くことで確認できます。
                                </p>
                                <div class="txt_c">
                                    <button @click="gyroViwer" :class="{'pure-button-disabled': isSubmitDisabled}" class="pure-button">ジャイロARを見る</button>
                                    <button @click="tweetGyro" :class="{'pure-button-disabled': isSubmitDisabled}" class="pure-button pure-button-primary">ツイートする</button>
                                </div>
                                <h3>マーカーAR</h3>
                                <p>
                                    QRコードのページでマーカーを映すことで、そのマーカーの位置・サイズに合わせて表示されます。<br>
                                    下記マーカーを右クリックや長押しで保存してご利用ください。
                                </p>
                                <div class="txt_c">
                                    <img ref="qrImg" width="256" height="256">
                                </div>
                            </div>
                        </transition>
                    </div>
                    <canvas ref="qrCanvas" class="none" width="1024" height="1024"></canvas>
                </div>
            </div>
        </section>

        <section ref="howto" class="pad_a">
            <h2 class="border_b">使い方</h2>

            <div class="pure-g font_s">
                <div class="pure-u-1 pure-u-md-1-2">
                    <h3>ジェネレータ</h3>
                    <p class="pad_a">
                        このジェネレータでは、4つの画像を表示するARを作ることができます。<br>
                        全てを設定する必要はなく、画像を最低1つどこかに設定すればAR表示可能です。
                    </p>
                    <p class="pad_a">
                        ページ内プレビューエリアでは、このページからアップロードした画像やサイズなどが即時反映されますが、一部のオプションは反映されない簡易確認用となっています。
                    </p>
                    <p class="pad_a">
                        「プレビュー」ボタンで、マーカー不要中央固定で表示するページを開きます。<br>
                        問題がなければ「AR作成！」ボタンを押すことで、マーカー不要のジャイロAR用URLと、AR表示用マーカーを生成します。<br>
                        マーカー画像は右クリック、もしくは長押しで保存できるので、ご活用ください。
                    </p>
                    <h3>マーカー</h3>
                    <p class="pad_a">
                        マーカーを使ってARを見るときは、マーカー内のQRコードのURLにアクセスし、そのページで「カメラを許可」し、マーカーを映すことで、ARを見ることができます。<br>
                        別のマーカーを見るときは幾度、マーカー内のQRコードのページにアクセスし直してください。
                    </p>

                </div>
                <div class="pure-u-1 pure-u-md-1-2">
                    <h3>画像URL</h3>
                    <p class="pad_l">
                        「ファイルを選択」からローカルのファイルを選択するか、アップロード済みの画像のURLをテキストボックスに入力してください。<br>
                        画像のサイズが整数比の、透過GIFアニメや透過PNGなどがおすすめです。<br>
                        このページから選択し、アップロードする場合の画像の容量制限は10MBまでですが、<a target="_blank" href="https://imgur.com/">imgur</a>などで事前にアップロードしておけば、制限は特にありません。<br>
                        このページからアップロードした画像は、あとから削除することができないため、imgurのアカウントを作りアップロードすることをおすすめします。
                    </p>
                    <h3>横・縦</h3>
                    <p class="pad_l">
                        マーカーの1辺の長さを1としたときの、画像の大きさを設定してください。<br>
                        元の画像サイズよりこちらが優先され、設定しない場合は2×2で表示されるマーカーが生成されます。
                    </p>
                    <h3>チェックボックス</h3>
                    <p class="pad_l">
                        オプションを設定してください。
                    </p>
                    <ul class="list_y">
                        <li>
                            <b>床影</b>：<br>
                            マーカーのある平面（地面）にシルエットを表示します。<br>
                            「床」には設定できません。
                        </li>
                        <li>
                            <b>曲げ</b>：<br>
                            少し曲面状に曲げることで立体感を出します。<br>
                            「真ん中」と「手前」はこちらへ反りだすように、「奥」は奥へ押し込まれたように曲がります。<br>
                            「床」には設定できません。
                        </li>
                        <li>
                            <b>ぽよ</b>：<br>
                            ぽよぽよと跳ねさせます。<br>
                        </li>
                        <li>
                            <b>回転</b>：<br>
                            ゆっくり反時計回りに回ります。<br>
                            「床」のみに設定できます。
                        </li>
                        <li>
                            <b>球体</b>：<br>
                            「真ん中」を包むような球体になります。<br>
                            「床」のみに設定できます。
                        </li>
                    </ul>
                </div>
            </div>
        </section>

        <section ref="attention" class="pad_a">
            <h2 class="border_b">注意</h2>

            <div class="font_s">
                <p>ARは下記の対応端末でご確認お願いします。</p>
                <ul class="list_y">
                    <li>
                        iOS 11 以上の iPhone/iPad Safari<br>
                        ※ iPhone 6S 以降の iPhone、または iPad(第5世代) 以降の iPad 及び iPad Pro
                    </li>
                    <li>Android Chromeブラウザ</li>
                    <li>Webカメラ付きPC</li>
                </ul>
                <p>
                    何らかの理由で「WebARジェネレータ」の公開を差し止めた場合、既に作成したマーカーも使用できなくなることがありますので、ご了承ください。<br>
                    また、利用にあたって生じた、あらゆる不利益または損害に対して、一切の責任を負いません。
                </p>

            </div>
        </section>

        <section ref="example" class="pad_a">
            <h2 class="border_b">一例</h2>

            <div class="font_s">
                <p><a target="_blank" href="https://web-ar-viewer.firebaseapp.com/?wh=287adfd&fs=b&fw=b&fp=4&i0=https://i.imgur.com/6Kwc3yy.jpg&i1=https://i.imgur.com/22KUVww.gif&i2=https://i.imgur.com/MjYnaRK.png&i3=https://i.imgur.com/EPasW4u.gif&gyro=1">跳ねる文字と回転する地球と影付きのキャラクター</a></p>
            </div>
        </section>

        <section ref="contact" class="pad_a">
            <h2 class="border_b">問い合わせ</h2>

            <div class="font_s">
                <p>
                    「WebARジェネレータ」は、<a target="_blank" href="https://twitter.com/yoridrill">@yoridrill</a>が個人で制作しています。<br>
                    ご要望や不具合報告などはTwitterへお願いします。
                </p>
                <p>
                    <a target="_blank" href="https://yoridori.booth.pm/items/934441">BOOTH</a>でカンパを募集しています！<br>
                    こちらのジェネレーターで使用できる紙吹雪や桜吹雪などの素材を置いていますので、ぜひご活用くださいませ。<br>
                    ガチャまわしたいです！！！！！！
                </p>
            </div>
        </section>
        <section class="pad_t txt_c font_xs">
            © 2018 WebARジェネレータ
        </section>
    </div>
</body>
<script src="https://yoridrill.github.io/web-ar-generator/js/index-min.js"></script>
</html>
